#######################################################################
#                                                                     #
#                             Camlp4                                  #
#                                                                     #
#            Damien Doligez, projet Para, INRIA Rocquencourt          #
#                                                                     #
#  Copyright 1999 Institut National de Recherche en Informatique et   #
#  en Automatique.  Distributed only by permission.                   #
#                                                                     #
#######################################################################

# $Id$

INCLUDES = -I ::camlp4: -I ::boot: -I ::odyl: -I "{OTOP}otherlibs:dynlink:"
OCAMLCFLAGS = {INCLUDES}
LINKFLAGS = {INCLUDES}
OBJS = crc.cmo ocpp.cmo
INTERFACES = -I "{OLIBDIR}" Arg Array Callback Char Digest Filename Format ¶
             Gc Genlex Hashtbl Lexing List Map Obj Oo Parsing Pervasives ¶
             Printexc Printf Queue Random Set Sort Stack Stream String Sys ¶
             Weak -I ::boot: Gramext Grammar Plexer Stdpp Token -I ::camlp4: ¶
             MLast Quotation

all Ä ocpp

ocpp Ä {OBJS}
    {OCAMLC} {LINKFLAGS} ::boot:stdpp.cmo ::camlp4:quotation.cmo ¶
             ::odyl:odyl.cma {OBJS} ::odyl:odyl.cmo -linkall -o ocpp

clean ÄÄ
    delete -i ocpp

install Ä
    (newfolder "{P4LIBDIR}" || set status 0) ³ dev:null
    (newfolder "{BINDIR}" || set status 0) ³ dev:null
    duplicate -y {OBJS} "{P4LIBDIR}"
    duplicate -y ocpp "{BINDIR}"

depend Ä $OutOfDate

{defrules}
